machine:
  php:
    version: 7.0.4

dependencies:
  override:
    - echo "Ignore CircleCI defaults"
  cache_directories:
    - "~/.composer/cache"
    - "~/drupal"

checkout:
  post:
    - test -d ~/drupal || composer create-project -n drupal/drupal ~/drupal

test:
  override:
    - rsync -a --delete ~/LCM-Monitoring/ ~/drupal/modules/lcm_monitoring/
    - cd ~/drupal && vendor/bin/phpunit -c modules/lcm_monitoring



